(function(h){function g(){if(!(this instanceof g)){return new g()}this._hooks={actions:{},filters:{}};g.prototype.add_action=e(this._hooks.actions);g.prototype.add_filter=e(this._hooks.filters);g.prototype.remove_action=b(this._hooks.actions);g.prototype.remove_filter=b(this._hooks.filters);g.prototype.has_action=c(this._hooks.actions);g.prototype.has_filter=c(this._hooks.filters);g.prototype.remove_all_actions=b(this._hooks.actions,true);g.prototype.remove_all_filters=b(this._hooks.filters,true);g.prototype.do_action=a(this._hooks.actions);g.prototype.apply_filters=a(this._hooks.filters,true);g.prototype.current_action=d(this._hooks.actions);g.prototype.current_filter=d(this._hooks.filters);g.prototype.doing_action=i(this._hooks.actions);g.prototype.doing_filter=i(this._hooks.filters);g.prototype.did_action=f(this._hooks.actions);g.prototype.did_filter=f(this._hooks.filters)}h.hook=new g();function e(j){return function k(o,q,n){n=h._default(n,10);if(typeof o!=="string"){console.error("The hook name must be a string.");return}if(/^__/.test(o)){console.error("The hook name cannot begin with `__`.");return}if(typeof q!=="function"){console.error("The hook callback must be a function.");return}if(typeof n!=="number"){console.error("If specified, the hook priority must be a number.");return}var p={callback:q,priority:n};if(j.hasOwnProperty(o)){var l=j[o].handlers;var m=0;while(m<l.length){if(l[m].priority>n){break}m++}l.splice(m,0,p);(j.__current||[]).forEach(function(r){if(r.name===o&&r.currentIndex>=m){r.currentIndex++}})}else{j[o]={handlers:[p],runs:0}}}}function d(j,l){return function k(){if(!j.__current||!j.__current.length){return null}return j.__current[j.__current.length-1].name}}function f(j){return function k(l){return j.hasOwnProperty(l)&&j[l].runs?j[l].runs:0}}function i(j){return function k(l){if("undefined"===typeof l){return"undefined"!==typeof j.__current[0]}return j.__current[0]?l===j.__current[0].name:false}}function c(j){return function k(l){return j.hasOwnProperty(l)?j[l].handlers.length:0}}function b(j,k){return function l(p,q){if(!k&&typeof q!=="function"){console.error("The hook callback to remove must be a function.");return}if(!j.hasOwnProperty(p)){return 0}var n=0;if(k){n=j[p].handlers.length;j[p]={runs:j[p].runs,handlers:[]}}else{var m=j[p].handlers;for(var o=m.length-1;o>=0;o--){if(m[o].callback===q){m.splice(o,1);n++;(j.__current||[]).forEach(function(r){if(r.name===p&&r.currentIndex>=o){r.currentIndex--}})}}}return n}}function a(j,k){return function l(){var o=Array.prototype.slice.call(arguments);var p=o.shift();if(typeof p!=="string"){console.error("The hook name must be a string.");return}if(/^__/.test(p)){console.error("The hook name cannot begin with `__`.");return}if(!j.hasOwnProperty(p)){j[p]={runs:0,handlers:[]}}var n=j[p].handlers;if(!n.length){return k?o[0]:undefined}var r={name:p,currentIndex:0};j.__current=j.__current||[];j.__current.push(r);j[p].runs++;var m=o[0];while(r.currentIndex<n.length){var q=n[r.currentIndex];m=q.callback.apply(null,o);if(k){o[0]=m}r.currentIndex++}j.__current.pop();if(k){return m}}}})(ecjia);