(function(b,a){a(document).on("change",'select[data-toggle="regionSummary"]',function(k){var j=a(this);var d=j.attr("data-url")||j.attr("href")||a('select[data-toggle="regionSummary"]').eq(0).attr("data-url");var c=j.attr("data-pid")||j.find("option:checked").val();var g=j.attr("data-type");var h=j.attr("data-target");var f={url:d,pid:c,type:g,target:h};k.preventDefault();b.region.regionSummary(f)});b.region={isAdmin:false,url:"",regionSummary:function(c){if(!c.url&&!this.url){console.log("必须指定地址源");return}var d={pid:0,type:1,target:"region-summary"};var c=a.extend({},d,c);this.url=c.url?c.url:this.url;this.loadRegions(c.pid,c.type,c.target)},loadRegions:function(d,c,e){a.get(this.url,"type="+c+"&target="+e+"&parent="+d,this.response,"JSON")},response:function(c){var e=a("."+c.target);e.find("option").eq(0).attr("checked","checked");e.find("option:gt(0)").remove();if(c.regions){for(i=0;i<c.regions.length;i++){var d=document.createElement("OPTION");d.value=c.regions[i].region_id;d.text=c.regions[i].region_name;e.append(d)}}e.trigger("liszt:updated").trigger("change")},changed:function(f,e,c){var d=f.options[f.selectedIndex].value;this.loadRegions(d,e,c)},}})(ecjia,jQuery);