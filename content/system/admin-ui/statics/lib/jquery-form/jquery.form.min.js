/*!
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a((typeof(jQuery)!="undefined")?jQuery:window.Zepto)}}(function(f){var c={};c.fileapi=f("<input type='file'/>").get(0).files!==undefined;c.formdata=window.FormData!==undefined;var e=!!f.fn.prop;f.fn.attr2=function(){if(!e){return this.attr.apply(this,arguments)}var g=this.prop.apply(this,arguments);if((g&&g.jquery)||typeof g==="string"){return g}return this.attr.apply(this,arguments)};f.fn.ajaxSubmit=function(l){var s=f(this).find(".btn-gebo"),F=s.eq(0).text();s.addClass("disabled").text("请稍候…");var g=f(this).find(".btn-info"),J=g.eq(0).text();g.addClass("disabled").text("请稍候…");if(!this.length){d("ajaxSubmit: skipping submit process - no element selected");return this}var j,E,n,p=this;if(typeof l=="function"){l={success:l}}else{if(l===undefined){l={}}}j=l.type||this.attr2("method");E=l.url||this.attr2("action");n=(typeof E==="string")?f.trim(E):"";n=n||window.location.href||"";if(n){n=(n.match(/^([^#]+)/)||[])[1]}l=f.extend(true,{url:n,success:f.ajaxSettings.success,error:f.ajaxSettings.error,type:j||f.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},l);var w={};this.trigger("form-pre-serialize",[this,l,w]);if(w.veto){d("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(l.beforeSerialize&&l.beforeSerialize(this,l)===false){d("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var o=l.traditional;if(o===undefined){o=f.ajaxSettings.traditional}var u=[];var H,I=this.formToArray(l.semantic,u);if(l.data){l.extraData=l.data;H=f.param(l.data,o)}if(l.beforeSubmit&&l.beforeSubmit(I,this,l)===false){d("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[I,this,l,w]);if(w.veto){d("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var A=f.param(I,o);if(H){A=(A?(A+"&"+H):H)}if(l.type.toUpperCase()=="GET"){l.url+=(l.url.indexOf("?")>=0?"&":"?")+A;l.data=null}else{l.data=A}var L=[];if(l.resetForm){L.push(function(){p.resetForm()})}if(l.clearForm){L.push(function(){p.clearForm(l.includeHidden)})}if(!l.dataType&&l.target){var m=l.success||function(){};L.push(function(q){var k=l.replaceTarget?"replaceWith":"html";f(l.target)[k](q).each(m,arguments)})}else{if(l.success){L.push(l.success)}}l.success=function(O,q,P){s.removeClass("disabled").text(F);g.removeClass("disabled").text(J);var N=l.context||this;for(var M=0,k=L.length;M<k;M++){L[M].apply(N,[O,q,P||p,p])}};if(l.error){var B=l.error;l.error=function(N,k,q){s.removeClass("disabled").text(F);var M=l.context||this;B.apply(M,[N,k,q,p])}}if(l.complete){var i=l.complete;l.complete=function(M,k){s.removeClass("disabled").text(F);var q=l.context||this;i.apply(q,[M,k,p])}}var G=f("input[type=file]:enabled",this).filter(function(){return f(this).val()!==""});var r=G.length>0;var D="multipart/form-data";var z=(p.attr("enctype")==D||p.attr("encoding")==D);var y=c.fileapi&&c.formdata;d("fileAPI :"+y);var t=(r||z)&&!y;var x;if(l.iframe!==false&&(l.iframe||t)){if(l.closeKeepAlive){f.get(l.closeKeepAlive,function(){x=K(I)})}else{x=K(I)}}else{if((r||z)&&y){x=v(I)}else{x=f.ajax(l)}}p.removeData("jqxhr").data("jqxhr",x);for(var C=0;C<u.length;C++){u[C]=null}this.trigger("form-submit-notify",[this,l]);return this;function h(O){var P=f.param(O,l.traditional).split("&");var q=P.length;var k=[];var N,M;for(N=0;N<q;N++){P[N]=P[N].replace(/\+/g," ");M=P[N].split("=");k.push([decodeURIComponent(M[0]),decodeURIComponent(M[1])])}return k}function v(q){var k=new FormData();for(var M=0;M<q.length;M++){k.append(q[M].name,q[M].value)}if(l.extraData){var P=h(l.extraData);for(M=0;M<P.length;M++){if(P[M]){k.append(P[M][0],P[M][1])}}}l.data=null;var O=f.extend(true,{},f.ajaxSettings,l,{contentType:false,processData:false,cache:false,type:j||"POST"});if(l.uploadProgress){O.xhr=function(){var Q=f.ajaxSettings.xhr();if(Q.upload){Q.upload.addEventListener("progress",function(U){var T=0;var R=U.loaded||U.position;var S=U.total;if(U.lengthComputable){T=Math.ceil(R/S*100)}l.uploadProgress(U,R,S,T)},false)}return Q}}O.data=null;var N=O.beforeSend;O.beforeSend=function(R,Q){if(l.formData){Q.data=l.formData}else{Q.data=k}if(N){N.call(this,R,Q)}};return f.ajax(O)}function K(aj){var P=p[0],O,af,Z,ah,ac,R,U,S,T,ad,ag,X;var am=f.Deferred();am.abort=function(an){S.abort(an)};if(aj){for(af=0;af<u.length;af++){O=f(u[af]);if(e){O.prop("disabled",false)}else{O.removeAttr("disabled")}}}Z=f.extend(true,{},f.ajaxSettings,l);Z.context=Z.context||Z;ac="jqFormIO"+(new Date().getTime());if(Z.iframeTarget){R=f(Z.iframeTarget);ad=R.attr2("name");if(!ad){R.attr2("name",ac)}else{ac=ad}}else{R=f('<iframe name="'+ac+'" src="'+Z.iframeSrc+'" />');R.css({position:"absolute",top:"-1000px",left:"-1000px"})}U=R[0];S={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(an){var ao=(an==="timeout"?"timeout":"aborted");d("aborting upload... "+ao);this.aborted=1;try{if(U.contentWindow.document.execCommand){U.contentWindow.document.execCommand("Stop")}}catch(ap){}R.attr("src",Z.iframeSrc);S.error=ao;if(Z.error){Z.error.call(Z.context,S,ao,an)}if(ah){f.event.trigger("ajaxError",[S,Z,ao])}if(Z.complete){Z.complete.call(Z.context,S,ao)}}};ah=Z.global;if(ah&&0===f.active++){f.event.trigger("ajaxStart")}if(ah){f.event.trigger("ajaxSend",[S,Z])}if(Z.beforeSend&&Z.beforeSend.call(Z.context,S,Z)===false){if(Z.global){f.active--}am.reject();return am}if(S.aborted){am.reject();return am}T=P.clk;if(T){ad=T.name;if(ad&&!T.disabled){Z.extraData=Z.extraData||{};Z.extraData[ad]=T.value;if(T.type=="image"){Z.extraData[ad+".x"]=P.clk_x;Z.extraData[ad+".y"]=P.clk_y}}}var Y=1;var V=2;function W(ap){var ao=null;try{if(ap.contentWindow){ao=ap.contentWindow.document}}catch(an){d("cannot get iframe.contentWindow document: "+an)}if(ao){return ao}try{ao=ap.contentDocument?ap.contentDocument:ap.document}catch(an){d("cannot get iframe.contentDocument: "+an);ao=ap.document}return ao}var N=f("meta[name=csrf-token]").attr("content");var M=f("meta[name=csrf-param]").attr("content");if(M&&N){Z.extraData=Z.extraData||{};Z.extraData[M]=N}function ae(){var aw=p.attr2("target"),ar=p.attr2("action"),ap="multipart/form-data",at=p.attr("enctype")||p.attr("encoding")||ap;P.setAttribute("target",ac);if(!j||/post/i.test(j)){P.setAttribute("method","POST")}if(ar!=Z.url){P.setAttribute("action",Z.url)}if(!Z.skipEncodingOverride&&(!j||/post/i.test(j))){p.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(Z.timeout){X=setTimeout(function(){ag=true;ab(Y)},Z.timeout)}function au(){try{var ax=W(U).readyState;d("state = "+ax);if(ax&&ax.toLowerCase()=="uninitialized"){setTimeout(au,50)}}catch(ay){d("Server abort: ",ay," (",ay.name,")");ab(V);if(X){clearTimeout(X)}X=undefined}}var av=[];try{if(Z.extraData){for(var ao in Z.extraData){if(Z.extraData.hasOwnProperty(ao)){if(f.isPlainObject(Z.extraData[ao])&&Z.extraData[ao].hasOwnProperty("name")&&Z.extraData[ao].hasOwnProperty("value")){av.push(f('<input type="hidden" name="'+Z.extraData[ao].name+'">').val(Z.extraData[ao].value).appendTo(P)[0])}else{av.push(f('<input type="hidden" name="'+ao+'">').val(Z.extraData[ao]).appendTo(P)[0])}}}}if(!Z.iframeTarget){R.appendTo("body")}if(U.attachEvent){U.attachEvent("onload",ab)}else{U.addEventListener("load",ab,false)}setTimeout(au,15);try{P.submit()}catch(aq){var an=document.createElement("form").submit;an.apply(P)}}finally{P.setAttribute("action",ar);P.setAttribute("enctype",at);if(aw){P.setAttribute("target",aw)}else{p.removeAttr("target")}f(av).remove()}}if(Z.forceSync){ae()}else{setTimeout(ae,10)}var ak,al,ai=50,Q;function ab(au){if(S.aborted||Q){return}al=W(U);if(!al){d("cannot access response document");au=V}if(au===Y&&S){S.abort("timeout");am.reject(S,"timeout");return}else{if(au==V&&S){S.abort("server abort");am.reject(S,"error","server abort");return}}if(!al||al.location.href==Z.iframeSrc){if(!ag){return}}if(U.detachEvent){U.detachEvent("onload",ab)}else{U.removeEventListener("load",ab,false)}var ar="success",aw;try{if(ag){throw"timeout"}var aq=Z.dataType=="xml"||al.XMLDocument||f.isXMLDoc(al);d("isXml="+aq);if(!aq&&window.opera&&(al.body===null||!al.body.innerHTML)){if(--ai){d("requeing onLoad callback, DOM not available");setTimeout(ab,250);return}}var ax=al.body?al.body:al.documentElement;S.responseText=ax?ax.innerHTML:null;S.responseXML=al.XMLDocument?al.XMLDocument:al;if(aq){Z.dataType="xml"}S.getResponseHeader=function(aA){var az={"content-type":Z.dataType};return az[aA.toLowerCase()]};if(ax){S.status=Number(ax.getAttribute("status"))||S.status;S.statusText=ax.getAttribute("statusText")||S.statusText}var an=(Z.dataType||"").toLowerCase();var av=/(json|script|text)/.test(an);if(av||Z.textarea){var at=al.getElementsByTagName("textarea")[0];if(at){S.responseText=at.value;S.status=Number(at.getAttribute("status"))||S.status;S.statusText=at.getAttribute("statusText")||S.statusText}else{if(av){var ao=al.getElementsByTagName("pre")[0];var ay=al.getElementsByTagName("body")[0];if(ao){S.responseText=ao.textContent?ao.textContent:ao.innerText}else{if(ay){S.responseText=ay.textContent?ay.textContent:ay.innerText}}}}}else{if(an=="xml"&&!S.responseXML&&S.responseText){S.responseXML=aa(S.responseText)}}try{ak=k(S,an,Z)}catch(ap){ar="parsererror";S.error=aw=(ap||ar)}}catch(ap){d("error caught: ",ap);ar="error";S.error=aw=(ap||ar)}if(S.aborted){d("upload aborted");ar=null}if(S.status){ar=(S.status>=200&&S.status<300||S.status===304)?"success":"error"}if(ar==="success"){if(Z.success){Z.success.call(Z.context,ak,"success",S)}am.resolve(S.responseText,"success",S);if(ah){f.event.trigger("ajaxSuccess",[S,Z])}}else{if(ar){if(aw===undefined){aw=S.statusText}if(Z.error){Z.error.call(Z.context,S,ar,aw)}am.reject(S,"error",aw);if(ah){f.event.trigger("ajaxError",[S,Z,aw])}}}if(ah){f.event.trigger("ajaxComplete",[S,Z])}if(ah&&!--f.active){f.event.trigger("ajaxStop")}if(Z.complete){Z.complete.call(Z.context,S,ar)}Q=true;if(Z.timeout){clearTimeout(X)}setTimeout(function(){if(!Z.iframeTarget){R.remove()}else{R.attr("src",Z.iframeSrc)}S.responseXML=null},100)}var aa=f.parseXML||function(an,ao){if(window.ActiveXObject){ao=new ActiveXObject("Microsoft.XMLDOM");ao.async="false";ao.loadXML(an)}else{ao=(new DOMParser()).parseFromString(an,"text/xml")}return(ao&&ao.documentElement&&ao.documentElement.nodeName!="parsererror")?ao:null};var q=f.parseJSON||function(an){return window["eval"]("("+an+")")};var k=function(at,aq,ap){var ao=at.getResponseHeader("content-type")||"",an=aq==="xml"||!aq&&ao.indexOf("xml")>=0,ar=an?at.responseXML:at.responseText;if(an&&ar.documentElement.nodeName==="parsererror"){if(f.error){f.error("parsererror")}}if(ap&&ap.dataFilter){ar=ap.dataFilter(ar,aq)}if(typeof ar==="string"){if(aq==="json"||!aq&&ao.indexOf("json")>=0){ar=q(ar)}else{if(aq==="script"||!aq&&ao.indexOf("javascript")>=0){f.globalEval(ar)}}}return ar};return am}};f.fn.ajaxForm=function(g){g=g||{};g.delegation=g.delegation&&f.isFunction(f.fn.on);if(!g.delegation&&this.length===0){var h={s:this.selector,c:this.context};if(!f.isReady&&h.s){d("DOM not ready, queuing ajaxForm");f(function(){f(h.s,h.c).ajaxForm(g)});return this}d("terminating; zero elements found by selector"+(f.isReady?"":" (DOM not ready)"));return this}if(g.delegation){f(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,g,b).on("click.form-plugin",this.selector,g,a);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",g,b).bind("click.form-plugin",g,a)};function b(h){var g=h.data;if(!h.isDefaultPrevented()){h.preventDefault();f(h.target).ajaxSubmit(g)}}function a(k){var j=k.target;var h=f(j);if(!(h.is("[type=submit],[type=image]"))){var g=h.closest("[type=submit]");if(g.length===0){return}j=g[0]}var i=this;i.clk=j;if(j.type=="image"){if(k.offsetX!==undefined){i.clk_x=k.offsetX;i.clk_y=k.offsetY}else{if(typeof f.fn.offset=="function"){var l=h.offset();i.clk_x=k.pageX-l.left;i.clk_y=k.pageY-l.top}else{i.clk_x=k.pageX-j.offsetLeft;i.clk_y=k.pageY-j.offsetTop}}}setTimeout(function(){i.clk=i.clk_x=i.clk_y=null},100)}f.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};f.fn.formToArray=function(x,g){var w=[];if(this.length===0){return w}var l=this[0];var z=this.attr("id");var q=x?l.getElementsByTagName("*"):l.elements;var A;if(q&&!/MSIE [678]/.test(navigator.userAgent)){q=f(q).get()}if(z){A=f(':input[form="'+z+'"]').get();if(A.length){q=(q||[]).concat(A)}}if(!q||!q.length){return w}var r,p,o,y,m,t,k;for(r=0,t=q.length;r<t;r++){m=q[r];o=m.name;if(!o||m.disabled){continue}if(x&&l.clk&&m.type=="image"){if(l.clk==m){w.push({name:o,value:f(m).val(),type:m.type});w.push({name:o+".x",value:l.clk_x},{name:o+".y",value:l.clk_y})}continue}y=f.fieldValue(m,true);if(y&&y.constructor==Array){if(g){g.push(m)}for(p=0,k=y.length;p<k;p++){w.push({name:o,value:y[p]})}}else{if(c.fileapi&&m.type=="file"){if(g){g.push(m)}var h=m.files;if(h.length){for(p=0;p<h.length;p++){w.push({name:o,value:h[p],type:m.type})}}else{w.push({name:o,value:"",type:m.type})}}else{if(y!==null&&typeof y!="undefined"){if(g){g.push(m)}w.push({name:o,value:y,type:m.type,required:m.required})}}}}if(!x&&l.clk){var s=f(l.clk),u=s[0];o=u.name;if(o&&!u.disabled&&u.type=="image"){w.push({name:o,value:s.val()});w.push({name:o+".x",value:l.clk_x},{name:o+".y",value:l.clk_y})}}return w};f.fn.formSerialize=function(g){return f.param(this.formToArray(g))};f.fn.fieldSerialize=function(h){var g=[];this.each(function(){var m=this.name;if(!m){return}var k=f.fieldValue(this,h);if(k&&k.constructor==Array){for(var l=0,j=k.length;l<j;l++){g.push({name:m,value:k[l]})}}else{if(k!==null&&typeof k!="undefined"){g.push({name:this.name,value:k})}}});return f.param(g)};f.fn.fieldValue=function(m){for(var l=[],j=0,g=this.length;j<g;j++){var k=this[j];var h=f.fieldValue(k,m);if(h===null||typeof h=="undefined"||(h.constructor==Array&&!h.length)){continue}if(h.constructor==Array){f.merge(l,h)}else{l.push(h)}}return l};f.fieldValue=function(g,o){var j=g.name,u=g.type,w=g.tagName.toLowerCase();if(o===undefined){o=true}if(o&&(!j||g.disabled||u=="reset"||u=="button"||(u=="checkbox"||u=="radio")&&!g.checked||(u=="submit"||u=="image")&&g.form&&g.form.clk!=g||w=="select"&&g.selectedIndex==-1)){return null}if(w=="select"){var p=g.selectedIndex;if(p<0){return null}var r=[],h=g.options;var l=(u=="select-one");var q=(l?p+1:h.length);for(var k=(l?p:0);k<q;k++){var m=h[k];if(m.selected){var s=m.value;if(!s){s=(m.attributes&&m.attributes.value&&!(m.attributes.value.specified))?m.text:m.value}if(l){return s}r.push(s)}}return r}return f(g).val()};f.fn.clearForm=function(g){return this.each(function(){f("input,select,textarea",this).clearFields(g)})};f.fn.clearFields=f.fn.clearInputs=function(g){var h=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var j=this.type,i=this.tagName.toLowerCase();if(h.test(j)||i=="textarea"){this.value=""}else{if(j=="checkbox"||j=="radio"){this.checked=false}else{if(i=="select"){this.selectedIndex=-1}else{if(j=="file"){if(/MSIE/.test(navigator.userAgent)){f(this).replaceWith(f(this).clone(true))}else{f(this).val("")}}else{if(g){if((g===true&&/hidden/.test(j))||(typeof g=="string"&&f(this).is(g))){this.value=""}}}}}}})};f.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};f.fn.enable=function(g){if(g===undefined){g=true}return this.each(function(){this.disabled=!g})};f.fn.selected=function(g){if(g===undefined){g=true}return this.each(function(){var h=this.type;if(h=="checkbox"||h=="radio"){this.checked=g}else{if(this.tagName.toLowerCase()=="option"){var i=f(this).parent("select");if(g&&i[0]&&i[0].type=="select-one"){i.find("option").selected(false)}this.selected=g}}})};f.fn.ajaxSubmit.debug=false;function d(){if(!f.fn.ajaxSubmit.debug){return}var g="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(g)}else{if(window.opera&&window.opera.postError){window.opera.postError(g)}}}}));