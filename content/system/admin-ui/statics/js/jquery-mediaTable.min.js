/**
 * jQuery Bacheca
 * Plugin Dimostrativo
 */

;(function(c){var j=function(a,d){var e=c(this),b=e.data("MediaTable");c.isEmptyObject(b)&&(b={$wrap:c("<div>"),$table:e,$menu:!1,cfg:a,id:e.attr("id")},b.id||(b.id="MediaTable-"+d,b.$table.attr("id",b.id)),b.$table.addClass("activeMediaTable"),b.$wrap.addClass("mediaTableWrapper"),b.$table.before(b.$wrap).appendTo(b.$wrap),b.cfg.menu&&h(b),b.$table.find("thead th").each(function(a){i.call(this,a,b)}),b.$table.data("MediaTable",b))},h=function(a){a.$menu=c('<div class="btn-group" />');a.$menu.$header= c('<a class="btn btn-small dropdown-toggle" data-toggle="dropdown" href="#" />');a.$menu.$list=c('<ul class="dropdown-menu" />');a.$menu.addClass("mediaTableMenu").addClass("mediaTableMenuClosed").append(a.$menu.$header).append(a.$menu.$list);a.$wrap.addClass("mediaTableWrapperWithMenu");a.$menu.$header.html(a.cfg.menuTitle+' <span class="caret"></span>');a.$table.before(a.$menu);c(window).bind("orientationchange resize",function(){a.$menu.find("input").trigger("updateCheck")});a.$menu.$header.bind("click", function(){a.$menu.toggleClass("mediaTableMenuClosed")});a.$menu.$list.bind("mouseleave",function(){a.$menu.toggleClass("mediaTableMenuClosed")})},i=function(a,d){var e=c(this),b=e.attr("id"),f=e.attr("class");b||(b=d.id+"-mediaTableCol-"+a,e.attr("id",b));if(d.cfg.menu&&!e.is(".persist")){var g=c('<li><label for="toggle-col-'+d.id+"-"+a+'" class="checkbox"><input type="checkbox" name="toggle-cols" id="toggle-col-'+d.id+"-"+a+'" value="'+b+'" /> '+e.text()+"</label></li>");d.$menu.$list.append(g); k(e,g.find("input"),d)}c("tbody tr",d.$table).each(function(){var d=b,e=c(this).find("td,th").eq(a);e.attr("headers",d);f&&e.attr("class",f)})},k=function(a,d,c){d.bind("change",function(){var a=d.val(),a=c.$table.find("#"+a+", [headers="+a+"]");d.is(":checked")?a.show():a.hide()}).bind("updateCheck",function(){a.is(":visible")?d.attr("checked",!0):d.attr("checked",!1)}).trigger("updateCheck")};c.fn.mediaTable=function(){var a=!1;if(!arguments.length||c.isPlainObject(arguments[0]))a=c.extend({},{menu:!0, menuTitle:"Columns",t:"e"},arguments[0]);if(!1!==a)c(this).each(function(d){j.call(this,a,d)});else if(arguments.length)switch(arguments[0]){case "destroy":c(this).each(function(){var a=c(this).data("MediaTable");a&&(a.$wrap.after(a.$table).remove(),a.$table.removeClass("activeMediaTable"),a.$table.data("MediaTable",null))})}return this}})(jQuery);

