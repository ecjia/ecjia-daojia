/*!
  jQuery Wookmark plugin 0.5
  @name jquery.wookmark.js
  @author Christoph Ono (chri@sto.ph or @gbks)
  @version 0.5
  @date 3/19/2012
  @category jQuery plugin
  @copyright (c) 2009-2012 Christoph Ono (www.wookmark.com)
  @license Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
  
  Added modifications
  https://github.com/HenriMorlaye/Wookmark-jQuery/commit/56f8b6fc88feef86507ac8086a284fc0779d7ade 
*/
$.fn.wookmark=function(a){if(!this.wookmarkOptions){this.wookmarkOptions=$.extend({container:$("body"),offset:2,autoResize:false,itemWidth:$(this[0]).outerWidth(),resizeDelay:50,resizeContainerHeight:true,flexibleItemWidth:false},a)}else{if(a){this.wookmarkOptions=$.extend(this.wookmarkOptions,a)}}if(!this.wookmarkColumns){this.wookmarkColumns=null;this.wookmarkContainerWidth=null}this.wookmarkLayout=function(){var f=this.wookmarkOptions.container.width();var e=this.wookmarkOptions.itemWidth+this.wookmarkOptions.offset;var d=Math.floor((f+this.wookmarkOptions.offset)/e);if(this.wookmarkOptions.flexibleItemWidth){var h=f%e;if(h<e/2){e+=h/d;var b=this.wookmarkOptions.itemWidth+h/d;this.width(b)}else{d+=1;e=f/d;var b=e-this.wookmarkOptions.offset;this.width(b)}}var g=Math.round((f-(d*e-this.wookmarkOptions.offset))/2);var c=0;if(this.wookmarkColumns!=null&&this.wookmarkColumns.length==d){c=this.wookmarkLayoutColumns(e,g)}else{c=this.wookmarkLayoutFull(e,d,g)}if(this.wookmarkOptions.resizeContainerHeight){this.wookmarkOptions.container.css("height",c+"px")}};this.wookmarkLayoutFull=function(e,g,j){var n=[];while(n.length<g){n.push(0)}this.wookmarkColumns=[];while(this.wookmarkColumns.length<g){this.wookmarkColumns.push([])}var p,o,f,l=0,h=0,d=this.length,m=null,c=null,b=0;for(;l<d;l++){p=$(this[l]);m=null;c=0;for(h=0;h<g;h++){if(m==null||n[h]<m){m=n[h];c=h}}p.css({position:"absolute",top:m+"px",left:(c*e+j)+"px"});n[c]=m+p.outerHeight()+this.wookmarkOptions.offset;b=Math.max(b,n[c]);this.wookmarkColumns[c].push(p)}return b};this.wookmarkLayoutColumns=function(c,g){var l=[];while(l.length<this.wookmarkColumns.length){l.push(0)}var j=0,d=this.wookmarkColumns.length,e;var f=0,h,m;var b=0;for(;j<d;j++){e=this.wookmarkColumns[j];h=e.length;for(f=0;f<h;f++){m=e[f];m.css({left:(j*c+g)+"px",top:l[j]+"px"});l[j]+=m.outerHeight()+this.wookmarkOptions.offset;b=Math.max(b,l[j])}}return b};this.wookmarkResizeTimer=null;if(!this.wookmarkResizeMethod){this.wookmarkResizeMethod=null}if(this.wookmarkOptions.autoResize){this.wookmarkOnResize=function(b){if(this.wookmarkResizeTimer){clearTimeout(this.wookmarkResizeTimer)}this.wookmarkResizeTimer=setTimeout($.proxy(this.wookmarkLayout,this),this.wookmarkOptions.resizeDelay)};if(!this.wookmarkResizeMethod){this.wookmarkResizeMethod=$.proxy(this.wookmarkOnResize,this)}$(window).resize(this.wookmarkResizeMethod)}this.wookmarkClear=function(){if(this.wookmarkResizeTimer){clearTimeout(this.wookmarkResizeTimer);this.wookmarkResizeTimer=null}if(this.wookmarkResizeMethod){$(window).unbind("resize",this.wookmarkResizeMethod)}};this.wookmarkLayout();this.show()};